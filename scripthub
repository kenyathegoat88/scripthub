-- üîí Prevenci√≥n de carga m√∫ltiple
if getgenv().KTC_Loader then return end
getgenv().KTC_Loader = true

-- üõ°Ô∏è Bypass Anticheat
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Client = ReplicatedStorage:FindFirstChild("Client")
local genv = getgenv()
local spoof = {}
genv.Data = spoof 

local char = Players.LocalPlayer.Character or Players.LocalPlayer.CharacterAdded:Wait()
for _, name in ipairs({ "Head", "Torso", "HumanoidRootPart", "Right Arm", "Left Arm", "Right Leg", "Left Leg" }) do
    local part = char:FindFirstChild(name)
    if part then
        spoof[part] = {
            Size = part.Size,
            Transparency = part.Transparency
        }
    end
end

local mt = getrawmetatable(game)
setreadonly(mt, false)
local __index = mt.__index
local __newindex = mt.__newindex
local __namecall = mt.__namecall

mt.__index = function(obj, key)
    if not checkcaller() and spoof[obj] then
        if key == "Size" then return spoof[obj].Size end
        if key == "Transparency" then return spoof[obj].Transparency end
    end
    return __index(obj, key)
end

mt.__newindex = function(obj, key, val)
    if not checkcaller() and spoof[obj] then
        if key == "Size" or key == "Transparency" then return end
    end
    return __newindex(obj, key, val)
end

mt.__namecall = function(self, ...)
    local method = getnamecallmethod()
    local args = { ... }
    if not checkcaller() and self == Client and method == "FireServer" then
        local flag = args[1]
        if flag == "BodyPartSize" or flag == "BodyPartTransparency" or flag == "TransparencyCheck" then
            return
        end
    end
    return __namecall(self, ...)
end
setreadonly(mt, true)

-- ‚ö†Ô∏è Aviso visual
local msg = Instance.new("TextLabel", Instance.new("ScreenGui", game.CoreGui))
msg.Size = UDim2.new(1,0,0,60)
msg.BackgroundColor3 = Color3.new(0,0,0)
msg.TextColor3 = Color3.new(1,0,0)
msg.TextScaled = true
msg.Text = "üî• Kenya mat√≥ al AntiCheat üî•"
task.delay(2, function() msg:Destroy() end)

-- üß† Fluent GUI
local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/kenyathegoat88/fluent/main/ui"))()
local Window = Fluent:CreateWindow({
    Title = "KTC Hub | Reach System",
    SubTitle = "by Kenya",
    TabWidth = 160,
    Size = UDim2.fromOffset(460, 300),
    Acrylic = true,
    Theme = "Darker",
    MinimizeKey = Enum.KeyCode.LeftControl
})
local Tabs = {
    Reach = Window:AddTab({ Title = "Reach", Icon = "üî™" }),
    React = Window:AddTab({ Title = "React", Icon = "‚ö°" })
}

-- üìè Reach System
local reachEnabled = false
local reachDistance = 5
Tabs.Reach:AddSlider("Reach Distance", {
    min = 2, max = 20, default = 5,
    callback = function(val) reachDistance = val end
})
Tabs.Reach:AddToggle("Reach Toggle", {
    default = false,
    callback = function(state) reachEnabled = state end
})

game:GetService("RunService").RenderStepped:Connect(function()
    if reachEnabled then
        local plr = Players.LocalPlayer
        local char = plr.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end
        for _, target in pairs(Players:GetPlayers()) do
            if target ~= plr and target.Character then
                local root = target.Character:FindFirstChild("HumanoidRootPart")
                if root and (root.Position - hrp.Position).Magnitude < reachDistance then
                    for _, limb in ipairs({"Right Arm", "Left Arm"}) do
                        local part = char:FindFirstChild(limb)
                        if part then
                            firetouchinterest(part, root, 0)
                            firetouchinterest(part, root, 1)
                        end
                    end
                end
            end
        end
    end
end)

-- üîÅ React System
local reactEnabled = false
Tabs.React:AddToggle("React Toggle", {
    default = false,
    callback = function(state) reactEnabled = state end
})
game:GetService("RunService").RenderStepped:Connect(function()
    if reactEnabled then
        local plr = Players.LocalPlayer
        local char = plr.Character
        local hrp = char and char:FindFirstChild("HumanoidRootPart")
        if not hrp then return end
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("BasePart") and obj.Name:lower():find("ball") then
                if (obj.Position - hrp.Position).Magnitude < 10 then
                    hrp.Velocity = (obj.Position - hrp.Position).Unit * 50
                end
            end
        end
    end
end)
